(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{360:function(s,t,a){"use strict";a.r(t);var n=a(8),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"一-phabricator-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-phabricator-安装"}},[s._v("#")]),s._v(" (一)Phabricator 安装")]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#_1-虚拟机安装centos7"}},[s._v("1. 虚拟机安装Centos7")])]),a("li",[a("a",{attrs:{href:"#_2-安装git"}},[s._v("2. 安装git")])]),a("li",[a("a",{attrs:{href:"#_3-安装nginx"}},[s._v("3. 安装nginx")])]),a("li",[a("a",{attrs:{href:"#_4-下载mysql5-7"}},[s._v("4.下载mysql5.7")])]),a("li",[a("a",{attrs:{href:"#_5-安装php5-6"}},[s._v("5.安装PHP5.6")])]),a("li",[a("a",{attrs:{href:"#_6-apc-php缓存-可选"}},[s._v("6.APC(PHP缓存, 可选)")])]),a("li",[a("a",{attrs:{href:"#_7-安装phabricator"}},[s._v("7. 安装Phabricator")])]),a("li",[a("a",{attrs:{href:"#参考链接"}},[s._v("参考链接")])])])]),a("p"),s._v(" "),a("h2",{attrs:{id:"_1-虚拟机安装centos7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-虚拟机安装centos7"}},[s._v("#")]),s._v(" 1. 虚拟机安装Centos7")]),s._v(" "),a("p",[s._v("从阿里云上下载Centos7的镜像."),a("a",{attrs:{href:"https://developer.aliyun.com/mirror/",target:"_blank",rel:"noopener noreferrer"}},[s._v("镜像下载地址"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("下载完成后使用虚拟机启动镜像")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tva1.sinaimg.cn/large/00831rSTly1gdb7zjshevj30lp09rwh0.jpg",alt:"centos7下载镜像"}})]),s._v(" "),a("h2",{attrs:{id:"_2-安装git"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装git"}},[s._v("#")]),s._v(" 2. 安装git")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装Git")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" -y\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看Git版本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" --version\n")])])]),a("h2",{attrs:{id:"_3-安装nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装nginx"}},[s._v("#")]),s._v(" 3. 安装nginx")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装epel-release源")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" epel-release -y\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装nginx")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx -y\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看nginx版本")]),s._v("\nnginx -v\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动nginx")]),s._v("\nsystemctl start nginx.service\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置开机启动")]),s._v("\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nginx.service\n")])])]),a("h2",{attrs:{id:"_4-下载mysql5-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-下载mysql5-7"}},[s._v("#")]),s._v(" 4.下载mysql5.7")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从mysql官网获取rpm文件地址, https://dev.mysql.com/downloads/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载rpm文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本地安装rpm文件")]),s._v("\nyum localinstall mysql80-community-release-el7-1.noarch.rpm\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看版本, 默认enabled的是80版本")]),s._v("\nyum repolist all "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysql\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改版本为5.7")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用的是yum-config-manager, 需安装yum-utils")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" yum-utils -y\nyum-config-manager --disable mysql80-community\nyum-config-manager --enable mysql57-community\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#也可以修改/etc/yum.repos.d/mysql-community.repo文件")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装mysql")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mysql-community-server -y\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动mysql")]),s._v("\nsystemctl start mysqld\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开机启动mysql")]),s._v("\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" mysqld\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看初始密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'temporary password'")]),s._v(" /var/log/mysqld.log\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接mysql")]),s._v("\nmysql -uroot -p\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改密码策略(可选)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 密码策略")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" global "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("validate_password_policy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 密码长度限制")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" global "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("validate_password_length")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置新密码")]),s._v("\nALTER "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" IDENTIFIED BY "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'密码'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置远程连接")]),s._v("\nuse mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" host,user from user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nupdate user "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("host")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" where "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" host,user from user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush privileges"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 尝试远程连接, 如果无法连接, 可能是因为防火墙或者SELinux")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭防火墙(可选)")]),s._v("\nsystemctl stop firewalld\nsystemctl disable firewalld\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭SELinux(可选)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 临时关闭")]),s._v("\nsetenforce "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 永久关闭, 修改/etc/selinux/config,")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将SELINUX=enforcing改为SELINUX=disabled")]),s._v("\n\n")])])]),a("h2",{attrs:{id:"_5-安装php5-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-安装php5-6"}},[s._v("#")]),s._v(" 5.安装PHP5.6")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装epel-release源(上一步已经安装过了)")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" epel-release -y\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装rpm")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置安装5.6")]),s._v("\nyum-config-manager --enable remi-php56\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装PHP (能安装的都装上)")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y php php-cli php-mysql php-process php-devel php-gd php-pecl-apc php-pecl-json php-mbstring php-common php-iconv php-curl php-pcntl php-apc php-xhprof pcre-devel php-pear php-fpm php-pecl-zendopcache python-pygments php-phpoffice-phpexcel\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看版本")]),s._v("\nphp --version\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启php-fpm")]),s._v("\nsystemctl start php-fpm\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开机启动")]),s._v("\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" php-fpm\n")])])]),a("h2",{attrs:{id:"_6-apc-php缓存-可选"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-apc-php缓存-可选"}},[s._v("#")]),s._v(" 6.APC(PHP缓存, 可选)")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装教程 https://www.php.net/manual/zh/apc.installation.php")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装apc")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pcre-devel -y\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" php-pear -y\npecl "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" apc\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果出现错误: no acceptable C compiler found in $PATH  ")]),s._v("\nyum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置APC")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"extension=apc.so"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/php.ini\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"apc.enabled=1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/php.ini\n")])])]),a("h2",{attrs:{id:"_7-安装phabricator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-安装phabricator"}},[s._v("#")]),s._v(" 7. 安装Phabricator")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 我安装在/opt/phabricator目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /opt/phabricator "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt/phabricator\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载源码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/phacility/libphutil.git\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/phacility/arcanist.git\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/phacility/phabricator.git\n")])])]),a("h2",{attrs:{id:"参考链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://secure.phabricator.com/book/phabricator/article/installation_guide/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方教程"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.php.net/manual/zh/apc.installation.php",target:"_blank",rel:"noopener noreferrer"}},[s._v("APC安装教程"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);